version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Install Dependencies
    task:
      jobs:
        - name: composer
          commands:
            - checkout
            - cache restore
            - cache store
    dependencies: []
  - name: Test
    task:
      jobs:
        - name: Test
          commands:
            - checkout
            - sem-version node 12
            - cache restore
            - npm install
            - cache store
    dependencies:
      - Install Dependencies
  - name: parellel Job
    dependencies:
      - Install Dependencies
      - Test
    task:
      jobs:
        - name: 'Job #1'
          commands:
            - 'checkout '
            - ls
        - name: 'Job #2'
          commands:
            - 'checkout '
            - ls
        - name: 'Job #3'
          commands:
            - checkout
            - ls
  - name: 'Run Code Analysis '
    dependencies:
      - Install Dependencies
      - Test
      - parellel Job
    task:
      jobs:
        - name: phpmd
          commands:
            - phpmd Sivareddypidugu/semaphoretest/blob/5390013c04605451e36e17cbb014dfaed99dd6d9/myrules.xml
